<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting started · SubglobalSensitivityAnalysis.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://bgctw.github.io/SubglobalSensitivityAnalysis.jl/getting_started/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SubglobalSensitivityAnalysis.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Getting started</a><ul class="internal"><li><a class="tocitem" href="#Getting-started"><span>Getting started</span></a></li></ul></li><li><span class="tocitem">How to</span><ul><li><a class="tocitem" href="../reload_design/">Reload the design matrix</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Public</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../estimate_subglobal/">Subglobal SA</a></li><li><a class="tocitem" href="../install_R_dependencies/">R dependencies</a></li><li><a class="tocitem" href="../SobolSensitivityEstimator/">Sobol methods</a></li></ul></li><li><a class="tocitem" href="../internal/">Internal</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Getting started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting started</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/bgctw/SubglobalSensitivityAnalysis.jl/blob/main/docs/src/getting_started.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Getting-started"><a class="docs-heading-anchor" href="#Getting-started">Getting started</a><a id="Getting-started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-started" title="Permalink"></a></h2><p>Assume we have a simple model, <code>fsens</code>,  which depends on two parameters, <code>a</code> and <code>b</code> and produces two outputs, <code>target1</code> and <code>target2</code>.</p><pre><code class="language-julia hljs">fsens = (a,b) -&gt; (;target1 = 10a + b -1, target2 = a + b -0.5)</code></pre><p>Our knowledge about reasonable model parameters is encoded by a prior probability distribution. We can specify those by the kind of distribution, its mode and an upper quantile. </p><pre><code class="language-julia hljs">using SubglobalSensitivityAnalysis, Distributions
parmsModeUpperRows = [
    (:a, LogNormal, 0.2 , 0.5),
    (:b, LogitNormal, 0.7 , 0.9),
]</code></pre><p>The output DataFrame reports </p><ul><li>the estimated index and confidence bounds (column value, cf<em>lower, cf</em>upper)</li><li>for each of the parameter/index_type/output combinations</li></ul><p>We can provide this directly to <code>estimate_subglobal_sobol_indices</code> below, or we  estimate/specify distribution parameters directly in a DataFrame with column <code>:dist</code>.</p><pre><code class="language-julia hljs">df_dist = fit_distributions(parmsModeUpperRows)</code></pre><div class="data-frame"><p>2 rows × 5 columns</p><table class="data-frame"><thead><tr><th></th><th>par</th><th>dType</th><th>mode</th><th>upper</th><th>dist</th></tr><tr><th></th><th title="Symbol">Symbol</th><th title="UnionAll">UnionAll</th><th title="Float64">Float64</th><th title="Float64">Float64</th><th title="Distributions.Distribution{Distributions.Univariate, Distributions.Continuous}">Distribu…</th></tr></thead><tbody><tr><th>1</th><td>a</td><td>LogNormal</td><td>0.2</td><td>0.5</td><td>Distributions.LogNormal{Float64}(μ=-1.60944, σ=0.467504)</td></tr><tr><th>2</th><td>b</td><td>LogitNormal</td><td>0.7</td><td>0.9</td><td>Distributions.LogitNormal{Float64}(μ=0.847298, σ=0.688751)</td></tr></tbody></table></div><p>While these distributions are reasonable for each parameter, there are  probably parameter combinations that produce unreasonable results. Hence, we want to restrict our analysis to a parameter space around a central parameter vector, <code>p0</code>.</p><pre><code class="language-julia hljs">p0 = Dict(:a =&gt; 0.34, :b =&gt; 0.6)</code></pre><p>By default a range around <code>p0</code> is created that covers 20% of the cumulative probability range, i.e a span of 0.2.</p><pre><code class="language- hljs">pl_cdf # hide</code></pre><p>For this range 20% of the area under the probability density  function is covered.</p><pre><code class="language- hljs">pl_pdf # hide</code></pre><p>The design matrix for the sensitivity analysis is  constructed in the  cumulative densities and transformed to parameter values. For each of the parameter vectors of the design matrix an output is computed.  Now the Sobol indices and their confidence ranges can be computed for this output.</p><p>All this encapsulated by function <a href="../estimate_subglobal/#SubglobalSensitivityAnalysis.estimate_subglobal_sobol_indices"><code>estimate_subglobal_sobol_indices</code></a>.</p><pre><code class="language- hljs"># note, for real analysis use a larger sample size
df_sobol = estimate_subglobal_sobol_indices(fsens, df_dist, p0; n_sample = 50)
df_sobol</code></pre><p>The resulting DataFrame reports:</p><ul><li>the estimated Sobol indeces and their confidence bounds  (columns value, cf<em>lower, cf</em>upper)</li><li>for all the combinations of parameter, which index, and output (columns par, index, target)   </li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../reload_design/">Reload the design matrix »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Friday 23 September 2022 09:49">Friday 23 September 2022</span>. Using Julia version 1.8.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
