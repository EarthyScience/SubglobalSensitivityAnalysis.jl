<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting started · SubglobalSensitivityAnalysis.jl</title><meta name="title" content="Getting started · SubglobalSensitivityAnalysis.jl"/><meta property="og:title" content="Getting started · SubglobalSensitivityAnalysis.jl"/><meta property="twitter:title" content="Getting started · SubglobalSensitivityAnalysis.jl"/><meta name="description" content="Documentation for SubglobalSensitivityAnalysis.jl."/><meta property="og:description" content="Documentation for SubglobalSensitivityAnalysis.jl."/><meta property="twitter:description" content="Documentation for SubglobalSensitivityAnalysis.jl."/><meta property="og:url" content="https://bgctw.github.io/SubglobalSensitivityAnalysis.jl/getting_started/"/><meta property="twitter:url" content="https://bgctw.github.io/SubglobalSensitivityAnalysis.jl/getting_started/"/><link rel="canonical" href="https://bgctw.github.io/SubglobalSensitivityAnalysis.jl/getting_started/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SubglobalSensitivityAnalysis.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Getting started</a><ul class="internal"><li><a class="tocitem" href="#Getting-started"><span>Getting started</span></a></li></ul></li><li><span class="tocitem">How to</span><ul><li><a class="tocitem" href="../reload_design/">Reload the design matrix</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Public</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../estimate_subglobal/">Subglobal SA</a></li><li><a class="tocitem" href="../install_R_dependencies/">R dependencies</a></li><li><a class="tocitem" href="../SobolSensitivityEstimator/">Sobol methods</a></li></ul></li><li><a class="tocitem" href="../internal/">Internal</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Getting started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting started</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/bgctw/SubglobalSensitivityAnalysis.jl/blob/main/docs/src/getting_started.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Getting-started"><a class="docs-heading-anchor" href="#Getting-started">Getting started</a><a id="Getting-started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-started" title="Permalink"></a></h2><p>Assume we have a simple model, <code>fsens</code>,  which depends on two parameters, <code>a</code> and <code>b</code> and produces two outputs, <code>target1</code> and <code>target2</code>.</p><pre><code class="language-julia hljs">fsens = (a,b) -&gt; (;target1 = 10a + b -1, target2 = a + b -0.5)</code></pre><p>Our knowledge about reasonable model parameters is encoded by a prior probability distribution. We can specify those by the kind of distribution, its mode and an upper quantile. </p><pre><code class="language-julia hljs">using SubglobalSensitivityAnalysis, Distributions
install_R_dependencies([&quot;sensitivity&quot;])

paramsModeUpperRows = [
    (:a, LogNormal, 0.2 , 0.5),
    (:b, LogitNormal, 0.7 , 0.9),
]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr33"><span class="sgr1">┌ Warning: </span></span>RCall.jl: Loading required namespace: sensitivity
<span class="sgr33"><span class="sgr1">│ </span></span>Registered S3 method overwritten by &#39;sensitivity&#39;:
<span class="sgr33"><span class="sgr1">│ </span></span>  method    from
<span class="sgr33"><span class="sgr1">│ </span></span>  print.src dplyr
<span class="sgr33"><span class="sgr1">└ </span></span><span class="sgr90">@ RCall ~/.julia/packages/RCall/YrsKg/src/io.jl:172</span></code></pre><p>The output DataFrame reports </p><ul><li>the estimated index and confidence bounds (column value, cf<em>lower, cf</em>upper)</li><li>for each of the parameter/index_type/output combinations</li></ul><p>We can provide this directly to <code>estimate_subglobal_sobol_indices</code> below, or we  estimate/specify distribution parameters directly in a DataFrame with column <code>:dist</code>.</p><pre><code class="language-julia hljs">df_dist = fit_distributions(paramsModeUpperRows)</code></pre><div><div style = "float: left;"><span>2×5 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">par</th><th style = "text-align: left;">dType</th><th style = "text-align: left;">mode</th><th style = "text-align: left;">upper</th><th style = "text-align: left;">dist</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "Symbol" style = "text-align: left;">Symbol</th><th title = "UnionAll" style = "text-align: left;">UnionAll</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Distributions.Distribution{Distributions.Univariate, Distributions.Continuous}" style = "text-align: left;">Distribu…</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: left;">a</td><td style = "text-align: left;">LogNormal</td><td style = "text-align: right;">0.2</td><td style = "text-align: right;">0.5</td><td style = "text-align: left;">Distributions.LogNormal{Float64}(μ=-1.60944, σ=0.467504)</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: left;">b</td><td style = "text-align: left;">LogitNormal</td><td style = "text-align: right;">0.7</td><td style = "text-align: right;">0.9</td><td style = "text-align: left;">Distributions.LogitNormal{Float64}(μ=0.847298, σ=0.688751)</td></tr></tbody></table></div><p>While these distributions are reasonable for each parameter, there are  probably parameter combinations that produce unreasonable results. Hence, we want to restrict our analysis to a parameter space around a central parameter vector, <code>p0</code>.</p><pre><code class="language-julia hljs">p0 = Dict(:a =&gt; 0.34, :b =&gt; 0.6)</code></pre><p>By default a range around <code>p0</code> is created that covers 20% of the cumulative probability range, i.e a span of 0.2.</p><img src="db0c2504.svg" alt="Example block output"/><p>For this range 20% of the area under the probability density  function is covered.</p><img src="4fc7e512.svg" alt="Example block output"/><p>The design matrix for the sensitivity analysis is  constructed in the  cumulative densities and transformed to parameter values. For each of the parameter vectors of the design matrix an output is computed.  Now the Sobol indices and their confidence ranges can be computed for this output.</p><p>All this encapsulated by function <a href="../estimate_subglobal/#SubglobalSensitivityAnalysis.estimate_subglobal_sobol_indices"><code>estimate_subglobal_sobol_indices</code></a>.</p><pre><code class="language-julia hljs"># note, for real analysis use a larger sample size
df_sobol = estimate_subglobal_sobol_indices(fsens, df_dist, p0; n_sample = 50)
df_sobol</code></pre><div><div style = "float: left;"><span>8×6 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">par</th><th style = "text-align: left;">index</th><th style = "text-align: left;">value</th><th style = "text-align: left;">cf_lower</th><th style = "text-align: left;">cf_upper</th><th style = "text-align: left;">target</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "Symbol" style = "text-align: left;">Symbol</th><th title = "Symbol" style = "text-align: left;">Symbol</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Symbol" style = "text-align: left;">Symbol</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: left;">a</td><td style = "text-align: left;">first_order</td><td style = "text-align: right;">0.996537</td><td style = "text-align: right;">0.950098</td><td style = "text-align: right;">1.04298</td><td style = "text-align: left;">target1</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: left;">b</td><td style = "text-align: left;">first_order</td><td style = "text-align: right;">-0.108823</td><td style = "text-align: right;">-0.365313</td><td style = "text-align: right;">0.147667</td><td style = "text-align: left;">target1</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: left;">a</td><td style = "text-align: left;">total</td><td style = "text-align: right;">1.11048</td><td style = "text-align: right;">0.85002</td><td style = "text-align: right;">1.37094</td><td style = "text-align: left;">target1</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: left;">b</td><td style = "text-align: left;">total</td><td style = "text-align: right;">0.00214538</td><td style = "text-align: right;">-0.0619349</td><td style = "text-align: right;">0.0662256</td><td style = "text-align: left;">target1</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">5</td><td style = "text-align: left;">a</td><td style = "text-align: left;">first_order</td><td style = "text-align: right;">0.77079</td><td style = "text-align: right;">0.684506</td><td style = "text-align: right;">0.857074</td><td style = "text-align: left;">target2</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">6</td><td style = "text-align: left;">b</td><td style = "text-align: left;">first_order</td><td style = "text-align: right;">0.205971</td><td style = "text-align: right;">-0.0337411</td><td style = "text-align: right;">0.445682</td><td style = "text-align: left;">target2</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">7</td><td style = "text-align: left;">a</td><td style = "text-align: left;">total</td><td style = "text-align: right;">0.891658</td><td style = "text-align: right;">0.608463</td><td style = "text-align: right;">1.17485</td><td style = "text-align: left;">target2</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">8</td><td style = "text-align: left;">b</td><td style = "text-align: left;">total</td><td style = "text-align: right;">0.177606</td><td style = "text-align: right;">0.136033</td><td style = "text-align: right;">0.219178</td><td style = "text-align: left;">target2</td></tr></tbody></table></div><p>The resulting DataFrame reports:</p><ul><li>the estimated Sobol indices and their confidence bounds  (columns value, cf<em>lower, cf</em>upper)</li><li>for all the combinations of parameter, which index, and output (columns par, index, target)   </li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../reload_design/">Reload the design matrix »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Friday 12 January 2024 14:06">Friday 12 January 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
